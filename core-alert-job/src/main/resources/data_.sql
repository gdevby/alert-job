-- H2 2.1.214; 
;              
CREATE USER IF NOT EXISTS "SA" SALT '725b80f0aff54d46' HASH 'b4dc680c38e478342e39801de90fded97dfd8b95afe4edb3cf294b34203087b4' ADMIN;          
CREATE MEMORY TABLE "PUBLIC"."APP_USER"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 2) NOT NULL,
    "DEFAULT_SEND_TYPE" BOOLEAN NOT NULL,
    "EMAIL" CHARACTER VARYING(255),
    "SWITCH_OFF_ALERTS" BOOLEAN NOT NULL,
    "TELEGRAM" BIGINT,
    "UUID" CHARACTER VARYING(255),
    "CURRENT_FILTER_ID" BIGINT
);           
ALTER TABLE "PUBLIC"."APP_USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");      
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.APP_USER; 
INSERT INTO "PUBLIC"."APP_USER" VALUES(1, TRUE, 'sashamaisievichs@gmail.com', TRUE, NULL, 'eba609a4-4a9c-4f9d-a6bb-624a1c47df1c', NULL);       
CREATE MEMORY TABLE "PUBLIC"."APP_USER_FILTERS"(
    "APP_USER_ID" BIGINT NOT NULL,
    "FILTERS_ID" BIGINT NOT NULL
);        
ALTER TABLE "PUBLIC"."APP_USER_FILTERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("APP_USER_ID", "FILTERS_ID");       
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.APP_USER_FILTERS;         
INSERT INTO "PUBLIC"."APP_USER_FILTERS" VALUES(1, 1);          
CREATE MEMORY TABLE "PUBLIC"."APP_USER_SOURCES"(
    "APP_USER_ID" BIGINT NOT NULL,
    "SOURCES_ID" BIGINT NOT NULL
);        
ALTER TABLE "PUBLIC"."APP_USER_SOURCES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("APP_USER_ID", "SOURCES_ID");       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.APP_USER_SOURCES;         
CREATE MEMORY TABLE "PUBLIC"."DESCRIPTION_WORD"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "COUNTER" BIGINT,
    "HIDDEN" BOOLEAN NOT NULL,
    "NAME" CHARACTER VARYING(255)
);            
ALTER TABLE "PUBLIC"."DESCRIPTION_WORD" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_3" PRIMARY KEY("ID");              
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.DESCRIPTION_WORD;         
CREATE MEMORY TABLE "PUBLIC"."SOURCE_SITE"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "FL_RU_FOR_ALL" BOOLEAN NOT NULL,
    "SITE_CATEGORY" BIGINT,
    "SITE_SOURCE" BIGINT,
    "SITE_SUB_CATEGORY" BIGINT
);             
ALTER TABLE "PUBLIC"."SOURCE_SITE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7D" PRIMARY KEY("ID");  
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.SOURCE_SITE;              
CREATE MEMORY TABLE "PUBLIC"."TECHNOLOGY_WORD"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "COUNTER" BIGINT,
    "HIDDEN" BOOLEAN NOT NULL,
    "NAME" CHARACTER VARYING(255)
);             
ALTER TABLE "PUBLIC"."TECHNOLOGY_WORD" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F" PRIMARY KEY("ID");               
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TECHNOLOGY_WORD;          
CREATE MEMORY TABLE "PUBLIC"."TITLE_WORD"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "COUNTER" BIGINT,
    "HIDDEN" BOOLEAN NOT NULL,
    "NAME" CHARACTER VARYING(255)
);  
ALTER TABLE "PUBLIC"."TITLE_WORD" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B" PRIMARY KEY("ID");    
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TITLE_WORD;               
CREATE MEMORY TABLE "PUBLIC"."USER_FILTER"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 2) NOT NULL,
    "MAX_VALUE" INTEGER,
    "MIN_VALUE" INTEGER,
    "NAME" CHARACTER VARYING(255)
);     
ALTER TABLE "PUBLIC"."USER_FILTER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_FD" PRIMARY KEY("ID");  
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.USER_FILTER;              
INSERT INTO "PUBLIC"."USER_FILTER" VALUES(1, 0, 0, '1111');    
CREATE MEMORY TABLE "PUBLIC"."USER_FILTER_DESCRIPTIONS"(
    "USER_FILTER_ID" BIGINT NOT NULL,
    "DESCRIPTIONS_ID" BIGINT NOT NULL
);        
ALTER TABLE "PUBLIC"."USER_FILTER_DESCRIPTIONS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("USER_FILTER_ID", "DESCRIPTIONS_ID");       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USER_FILTER_DESCRIPTIONS; 
CREATE MEMORY TABLE "PUBLIC"."USER_FILTER_TECHNOLOGIES"(
    "USER_FILTER_ID" BIGINT NOT NULL,
    "TECHNOLOGIES_ID" BIGINT NOT NULL
);        
ALTER TABLE "PUBLIC"."USER_FILTER_TECHNOLOGIES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("USER_FILTER_ID", "TECHNOLOGIES_ID");       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USER_FILTER_TECHNOLOGIES; 
CREATE MEMORY TABLE "PUBLIC"."USER_FILTER_TITLES"(
    "USER_FILTER_ID" BIGINT NOT NULL,
    "TITLES_ID" BIGINT NOT NULL
);    
ALTER TABLE "PUBLIC"."USER_FILTER_TITLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" PRIMARY KEY("USER_FILTER_ID", "TITLES_ID");   
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USER_FILTER_TITLES;       
ALTER TABLE "PUBLIC"."APP_USER_FILTERS" ADD CONSTRAINT "PUBLIC"."UK_FEQXSR5NAYMTY8D8TSQ8Q0G5A" UNIQUE("FILTERS_ID");           
ALTER TABLE "PUBLIC"."USER_FILTER_TECHNOLOGIES" ADD CONSTRAINT "PUBLIC"."FKBBCIDSQ75EUGC0TGIQXE7VB8D" FOREIGN KEY("USER_FILTER_ID") REFERENCES "PUBLIC"."USER_FILTER"("ID") NOCHECK;           
ALTER TABLE "PUBLIC"."APP_USER_FILTERS" ADD CONSTRAINT "PUBLIC"."FK7E8QKN3LTBKUR80UKCRK57LRD" FOREIGN KEY("FILTERS_ID") REFERENCES "PUBLIC"."USER_FILTER"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."USER_FILTER_TITLES" ADD CONSTRAINT "PUBLIC"."FKF4M988ILJIA6WA2IJ7AKI6GAH" FOREIGN KEY("USER_FILTER_ID") REFERENCES "PUBLIC"."USER_FILTER"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."APP_USER" ADD CONSTRAINT "PUBLIC"."FKN8SSG4OJ3F1D3OFM4T2R6L32J" FOREIGN KEY("CURRENT_FILTER_ID") REFERENCES "PUBLIC"."USER_FILTER"("ID") NOCHECK;        
ALTER TABLE "PUBLIC"."USER_FILTER_DESCRIPTIONS" ADD CONSTRAINT "PUBLIC"."FKPUJ3UAAG8LX9JXQR4J6TOUR6P" FOREIGN KEY("DESCRIPTIONS_ID") REFERENCES "PUBLIC"."DESCRIPTION_WORD"("ID") NOCHECK;     
ALTER TABLE "PUBLIC"."APP_USER_FILTERS" ADD CONSTRAINT "PUBLIC"."FKI3F38NWWD20K9UBTBG24MTQBW" FOREIGN KEY("APP_USER_ID") REFERENCES "PUBLIC"."APP_USER"("ID") NOCHECK;         
ALTER TABLE "PUBLIC"."APP_USER_SOURCES" ADD CONSTRAINT "PUBLIC"."FKBLW39D7NW35QODE9D8I70SEMB" FOREIGN KEY("SOURCES_ID") REFERENCES "PUBLIC"."SOURCE_SITE"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."USER_FILTER_TITLES" ADD CONSTRAINT "PUBLIC"."FKNV1T3DPW8W3OX3XTP2M5W6F97" FOREIGN KEY("TITLES_ID") REFERENCES "PUBLIC"."TITLE_WORD"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."USER_FILTER_DESCRIPTIONS" ADD CONSTRAINT "PUBLIC"."FK57SWJH5NHU6R29NI69I5L1TSR" FOREIGN KEY("USER_FILTER_ID") REFERENCES "PUBLIC"."USER_FILTER"("ID") NOCHECK;           
ALTER TABLE "PUBLIC"."USER_FILTER_TECHNOLOGIES" ADD CONSTRAINT "PUBLIC"."FKAI325JUG7Q9DCTGWYIDHASO88" FOREIGN KEY("TECHNOLOGIES_ID") REFERENCES "PUBLIC"."TECHNOLOGY_WORD"("ID") NOCHECK;      
ALTER TABLE "PUBLIC"."APP_USER_SOURCES" ADD CONSTRAINT "PUBLIC"."FKQAGTT41RB5KG88RXXPB6PY4K3" FOREIGN KEY("APP_USER_ID") REFERENCES "PUBLIC"."APP_USER"("ID") NOCHECK;         